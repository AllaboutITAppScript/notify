<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîî ‡πÅ‡∏≠‡∏õ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á!</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #FF4081;
            --primary-dark: #F50057;
            --secondary: #536DFE;
            --success: #00C853;
            --warning: #FF9100;
            --danger: #FF1744;
            --dark: #263238;
            --light: #ECEFF1;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Prompt', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(30deg);
        }
        
        .logo {
            font-size: 60px;
            margin-bottom: 20px;
            animation: ring 2s infinite;
        }
        
        @keyframes ring {
            0%, 100% { transform: rotate(0); }
            10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
            20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }
        
        .title h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        /* Content */
        .content {
            padding: 40px;
        }
        
        /* Status */
        .status-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .status-item {
            background: #F5F5F5;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .status-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .status-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .status-icon.active { color: var(--success); }
        .status-icon.inactive { color: var(--danger); }
        .status-icon.waiting { color: var(--warning); }
        
        /* Form */
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
            font-size: 1.1rem;
        }
        
        .form-control {
            width: 100%;
            padding: 18px;
            border: 2px solid #E3F2FD;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
            background: #F8F9FA;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(255, 64, 129, 0.1);
        }
        
        /* Buttons */
        .btn {
            padding: 18px 30px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 64, 129, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #00B248);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 200, 83, 0.3);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e68900);
            color: white;
        }
        
        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 145, 0, 0.3);
        }
        
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }
        
        /* Testimonials */
        .testimonial {
            background: linear-gradient(135deg, #E3F2FD, #F3E5F5);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            border-left: 5px solid var(--primary);
        }
        
        .testimonial i {
            font-size: 50px;
            color: var(--primary);
            margin-bottom: 20px;
            display: block;
        }
        
        /* Instructions */
        .instructions {
            background: #FFF3E0;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 5px solid var(--warning);
        }
        
        .steps {
            margin-top: 20px;
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            color: #666;
            padding: 30px;
            background: #F5F5F5;
            border-top: 1px solid #eee;
        }
        
        /* Toast */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .toast {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.3s;
            border-left: 5px solid var(--success);
            min-width: 350px;
            max-width: 400px;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .toast.error { border-left-color: var(--danger); }
        .toast.warning { border-left-color: var(--warning); }
        .toast.info { border-left-color: var(--primary); }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .content {
                padding: 20px;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .title h1 {
                font-size: 2rem;
            }
            
            .toast {
                min-width: calc(100vw - 40px);
                right: 10px;
                left: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-bell"></i>
            </div>
            <div class="title">
                <h1>‡πÅ‡∏≠‡∏õ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á!</h1>
                <p style="opacity: 0.9;">‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Service Worker ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå</p>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Testimonial -->
            <div class="testimonial">
                <i class="fas fa-check-circle"></i>
                <h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô 100%</h2>
                <p style="margin-top: 10px; color: #666;">
                    ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå HTML ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏Å‡πá‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!
                    ‡πÑ‡∏°‡πà‡∏°‡∏µ Service Worker ‡πÉ‡∏´‡πâ‡∏¢‡∏∏‡πà‡∏á‡∏¢‡∏≤‡∏Å
                </p>
            </div>

            <!-- Status -->
            <div class="status-grid">
                <div class="status-item">
                    <div class="status-icon active" id="notificationStatusIcon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <h3 id="notificationStatusText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</h3>
                    <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
                </div>
                
                <div class="status-item">
                    <div class="status-icon active" id="systemStatusIcon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <h3 id="systemStatusText">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
                    <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</p>
                </div>
            </div>

            <!-- Notification Form -->
            <h2 style="color: var(--dark); margin: 30px 0 20px 0;">
                <i class="fas fa-bell"></i> ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            </h2>
            
            <div class="form-group">
                <label class="form-label">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</label>
                <input type="text" id="notificationTitle" class="form-control" 
                       value="‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏õ" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠...">
            </div>
            
            <div class="form-group">
                <label class="form-label">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:</label>
                <textarea id="notificationMessage" class="form-control" rows="4" 
                          placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...">‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏õ HTML ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á!</textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ):</label>
                <input type="number" id="delayTime" class="form-control" value="5" min="1" max="300">
                <p style="margin-top: 8px; color: #666; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå
                </p>
            </div>

            <!-- Buttons -->
            <div class="btn-group">
                <button class="btn btn-primary" id="testNowBtn">
                    <i class="fas fa-bolt"></i> ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                </button>
                <button class="btn btn-success" id="scheduleBtn">
                    <i class="fas fa-clock"></i> ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                </button>
                <button class="btn btn-warning" id="requestPermissionBtn">
                    <i class="fas fa-hand-paper"></i> ‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï
                </button>
            </div>

            <!-- Instructions -->
            <div class="instructions">
                <h3><i class="fas fa-graduation-cap"></i> ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏¥‡∏î Browser</h3>
                
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div>
                            <h4>‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h4>
                            <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï" ‡πÅ‡∏•‡∏∞‡∏Å‡∏î Allow ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ñ‡∏≤‡∏°</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <div>
                            <h4>‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h4>
                            <p>‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô" ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <div>
                            <h4>‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h4>
                            <p>‡∏£‡∏≠‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!</p>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: #FFECB3; border-radius: 10px;">
                    <h4><i class="fas fa-lightbulb"></i> ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏©:</h4>
                    <p>‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ <strong>localStorage + setTimeout</strong> ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Service Worker ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢</p>
                </div>
            </div>

            <!-- Footer -->
            <div class="footer">
                <h3>‡πÅ‡∏≠‡∏õ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</h3>
                <p>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‚Ä¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå ‚Ä¢ ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà</p>
                <p style="margin-top: 10px; font-size: 0.9rem; color: #888;">
                    <i class="fas fa-code"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ HTML5 + JavaScript
                </p>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Audio for Notification -->
    <audio id="notificationSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" type="audio/mpeg">
    </audio>

    <!-- Main JavaScript -->
    <script>
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
        
        async function initializeApp() {
            console.log('üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô...');
            
            // Setup event listeners
            setupEventListeners();
            
            // Check notification permission
            checkNotificationPermission();
            
            // Check for pending notifications
            checkPendingNotifications();
            
            // Update system status
            updateSystemStatus();
            
            console.log('‚úÖ ‡πÅ‡∏≠‡∏õ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
            showToast('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö!', 'success', '‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
        }
        
        function setupEventListeners() {
            // Buttons
            document.getElementById('testNowBtn').addEventListener('click', testNotification);
            document.getElementById('scheduleBtn').addEventListener('click', scheduleNotification);
            document.getElementById('requestPermissionBtn').addEventListener('click', requestNotificationPermission);
        }
        
        // Check notification permission
        function checkNotificationPermission() {
            const icon = document.getElementById('notificationStatusIcon');
            const text = document.getElementById('notificationStatusText');
            
            if (!('Notification' in window)) {
                icon.className = 'status-icon inactive';
                text.textContent = '‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö';
                showToast('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô', 'error');
                return false;
            }
            
            const permission = Notification.permission;
            
            switch(permission) {
                case 'granted':
                    icon.className = 'status-icon active';
                    text.textContent = '‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏•‡πâ‡∏ß';
                    return true;
                case 'denied':
                    icon.className = 'status-icon inactive';
                    text.textContent = '‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡πÅ‡∏•‡πâ‡∏ß';
                    showToast('‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å', 'warning');
                    return false;
                default:
                    icon.className = 'status-icon waiting';
                    text.textContent = '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï';
                    return false;
            }
        }
        
        // Request notification permission
        async function requestNotificationPermission() {
            if (!('Notification' in window)) {
                showToast('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô', 'error');
                return false;
            }
            
            try {
                const permission = await Notification.requestPermission();
                
                // Update UI
                checkNotificationPermission();
                
                if (permission === 'granted') {
                    showToast('‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß!', 'success');
                    playSound();
                    return true;
                } else {
                    showToast('‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò', 'warning');
                    return false;
                }
            } catch (error) {
                console.error('‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:', error);
                showToast('‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß', 'error');
                return false;
            }
        }
        
        // Test notification
        async function testNotification() {
            if (Notification.permission !== 'granted') {
                const granted = await requestNotificationPermission();
                if (!granted) return;
            }
            
            const title = document.getElementById('notificationTitle').value.trim() || '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô';
            const message = document.getElementById('notificationMessage').value.trim() || '‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö';
            
            // Send notification
            const notification = new Notification(title, {
                body: message,
                icon: 'https://img.icons8.com/color/96/000000/appointment-reminders.png',
                badge: 'https://img.icons8.com/color/96/000000/appointment-reminders.png',
                requireInteraction: true
            });
            
            // Play sound
            playSound();
            
            // Show toast
            showToast('‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß!', 'success');
            
            // Log
            console.log('‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', title);
        }
        
        // Schedule notification
        async function scheduleNotification() {
            const title = document.getElementById('notificationTitle').value.trim() || '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤';
            const message = document.getElementById('notificationMessage').value.trim() || '‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ';
            const delaySeconds = parseInt(document.getElementById('delayTime').value) || 5;
            
            if (delaySeconds < 1 || delaySeconds > 300) {
                showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 1-300 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ', 'warning');
                return;
            }
            
            // Save to localStorage
            const notification = {
                id: 'notif-' + Date.now(),
                title: title,
                message: message,
                delaySeconds: delaySeconds,
                scheduledTime: Date.now() + (delaySeconds * 1000),
                createdAt: Date.now()
            };
            
            localStorage.setItem('scheduledNotification', JSON.stringify(notification));
            
            // Show confirmation
            showToast(
                '‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 
                'success',
                `‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å ${delaySeconds} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`
            );
            
            playSound();
            
            // Instructions
            showInstructions(delaySeconds);
            
            // Start countdown
            startCountdown(delaySeconds, notification);
        }
        
        // Check pending notifications
        function checkPendingNotifications() {
            try {
                const saved = localStorage.getItem('scheduledNotification');
                if (saved) {
                    const notification = JSON.parse(saved);
                    const now = Date.now();
                    
                    if (notification.scheduledTime <= now) {
                        // Notification is due, send it
                        sendScheduledNotification(notification);
                        localStorage.removeItem('scheduledNotification');
                    } else {
                        // Still pending, restart countdown
                        const remainingSeconds = Math.max(1, Math.round((notification.scheduledTime - now) / 1000));
                        startCountdown(remainingSeconds, notification);
                    }
                }
            } catch (error) {
                console.error('Check pending error:', error);
            }
        }
        
        // Send scheduled notification
        async function sendScheduledNotification(notification) {
            if (Notification.permission === 'granted') {
                const notif = new Notification(notification.title, {
                    body: '[‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤] ' + notification.message,
                    icon: 'https://img.icons8.com/color/96/000000/appointment-reminders.png',
                    badge: 'https://img.icons8.com/color/96/000000/appointment-reminders.png',
                    requireInteraction: true
                });
                
                // Play sound
                playSound();
                
                // Show toast
                showToast('‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤!', 'success', notification.title);
                
                console.log('‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤:', notification.title);
            }
        }
        
        // Start countdown
        function startCountdown(seconds, notification) {
            console.log(`‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á: ${seconds} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`);
            
            let remaining = seconds;
            
            const countdown = setInterval(() => {
                remaining--;
                
                if (remaining <= 0) {
                    clearInterval(countdown);
                    sendScheduledNotification(notification);
                    localStorage.removeItem('scheduledNotification');
                }
            }, 1000);
            
            // Also save the interval ID to clear if needed
            notification.countdownId = countdown;
            localStorage.setItem('scheduledNotification', JSON.stringify(notification));
        }
        
        // Show instructions
        function showInstructions(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            
            let timeText = '';
            if (minutes > 0) {
                timeText = `${minutes} ‡∏ô‡∏≤‡∏ó‡∏µ ${remainingSeconds > 0 ? remainingSeconds + ' ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ' : ''}`;
            } else {
                timeText = `${seconds} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
            }
            
            const instructions = `
                ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
                
                ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ:
                1. ‡∏≠‡∏¢‡πà‡∏≤‡∏õ‡∏¥‡∏î‡πÅ‡∏ó‡πá‡∏ö‡∏ô‡∏µ‡πâ (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡∏≠‡∏∑‡πà‡∏ô)
                2. ‡∏£‡∏≠ ${timeText}
                3. ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!
                
                ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©:
                1. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL ‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà
                2. ‡∏õ‡∏¥‡∏î‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏î‡∏¥‡∏°
                3. ‡∏£‡∏≠ ${timeText}
                4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!
            `;
            
            alert(instructions);
        }
        
        // Update system status
        function updateSystemStatus() {
            const capabilities = {
                notifications: 'Notification' in window,
                localStorage: 'localStorage' in window,
                audio: 'Audio' in window,
                serviceWorker: 'serviceWorker' in navigator
            };
            
            console.log('System capabilities:', capabilities);
            
            let statusText = '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
            if (!capabilities.notifications) {
                statusText = '‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
            }
            
            document.getElementById('systemStatusText').textContent = statusText;
        }
        
        // Play sound
        function playSound() {
            try {
                const audio = document.getElementById('notificationSound');
                audio.currentTime = 0;
                audio.play().catch(e => console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á:', e));
            } catch (error) {
                console.log('‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:', error);
                
                // Fallback: Use Web Audio API
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 800;
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                } catch (e) {
                    console.log('Web Audio API also failed:', e);
                }
            }
        }
        
        // Show toast
        function showToast(title, type = 'info', message = '') {
            const container = document.getElementById('toastContainer');
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-times-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            
            toast.innerHTML = `
                <div style="width: 50px; height: 50px; border-radius: 50%; background: var(--${type}); display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">
                    <i class="fas ${icons[type] || 'fa-info-circle'}"></i>
                </div>
                <div style="flex: 1;">
                    <strong style="display: block; margin-bottom: 5px; font-size: 1.1rem;">${title}</strong>
                    ${message ? `<div style="font-size: 0.95rem; color: #666;">${message}</div>` : ''}
                </div>
                <button class="toast-close" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #999; padding: 5px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                    &times;
                </button>
            `;
            
            container.appendChild(toast);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.style.opacity = '0';
                    setTimeout(() => {
                        if (toast.parentNode) toast.parentNode.removeChild(toast);
                    }, 300);
                }
            }, 5000);
            
            // Close button
            toast.querySelector('.toast-close').addEventListener('click', () => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    if (toast.parentNode) toast.parentNode.removeChild(toast);
                }, 300);
            });
        }
        
        // Listen for page visibility change
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                // Page became visible again, check for pending notifications
                checkPendingNotifications();
            }
        });
        
        // Also check every 10 seconds
        setInterval(checkPendingNotifications, 10000);
    </script>
</body>
</html>
